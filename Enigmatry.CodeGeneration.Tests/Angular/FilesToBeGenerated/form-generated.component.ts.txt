// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------;
/* eslint-disable */
import { Component, EventEmitter, Inject, Input, LOCALE_ID, OnInit, Optional, Output, TemplateRef } from '@angular/core';
import { FormGroup } from '@angular/forms';
import { FormlyFieldConfig } from '@ngx-formly/core';
import { IFormMock } from 'src/app/api/api-reference';
import { IFieldExpressionDictionary, SelectConfiguration, ENIGMATRY_FIELD_TYPE_RESOLVER, FieldTypeResolver, sortOptions } from '@enigmatry/angular-building-blocks/form';
import { BehaviorSubject, of } from 'rxjs';
import { map } from 'rxjs/operators';

@Component({
  selector: 'app-g-form',
  templateUrl: './form-generated.component.html',
  styleUrls: ['./form-generated.component.scss']
})
export class FormGeneratedComponent implements OnInit {

  @Input() model: IFormMock = {} as IFormMock;
  @Input() set isReadonly(value: boolean) {
    this._isReadonly = value;
    this.fields = this.initializeFields();
  }
  get isReadonly() {
    return this._isReadonly;
  }

  @Input() saveButtonText: string = 'Save';
  @Input() cancelButtonText: string = 'Cancel';
  @Input() formButtonsTemplate: TemplateRef<any> | null | undefined;

  @Input() fieldsHideExpressions: IFieldExpressionDictionary<IFormMock> | undefined = undefined;
  @Input() fieldsDisableExpressions: IFieldExpressionDictionary<IFormMock> | undefined = undefined;

  @Output() save = new EventEmitter<IFormMock>();
  @Output() cancel = new EventEmitter<void>();
  @Output() buttonClick = new EventEmitter<string>();

                @Input() formStatusOptions: any[] = [{ value: null, displayName: $localize `:@@empty-option.none:None` }, { value: 0, displayName: $localize `:@@enum.enum-mock.first:First` }, { value: 1, displayName: $localize `:@@enum.enum-mock.second:Second` }, { value: 2, displayName: $localize `:@@enum.enum-mock.third:Third` }];
                @Input() formStatusOptionsConfiguration: SelectConfiguration = { valueProperty: 'value', labelProperty: 'displayName', sortProperty: 'displayName' };
                @Input() mockRadioOptions: any[] = [{ value: 0, displayName: $localize `:@@enum.enum-mock.first:First` }, { value: 1, displayName: $localize `:@@enum.enum-mock.second:Second` }, { value: 2, displayName: $localize `:@@enum.enum-mock.third:Third` }];
                @Input() mockRadioOptionsConfiguration: SelectConfiguration = { valueProperty: 'value', labelProperty: 'displayName', sortProperty: '' };
            private categoryIdOptions$ = new BehaviorSubject<any[]>([]);
                @Input()
                get categoryIdOptions(): any[] { return this.categoryIdOptions$.value; }
                set categoryIdOptions(value: any[]) { this.categoryIdOptions$.next(value); }
                @Input() categoryIdOptionsConfiguration: SelectConfiguration = { valueProperty: 'id', labelProperty: 'categoryName', sortProperty: 'categoryName' };
            private typesOptions$ = new BehaviorSubject<any[]>([]);
                @Input()
                get typesOptions(): any[] { return this.typesOptions$.value; }
                set typesOptions(value: any[]) { this.typesOptions$.next(value); }
                @Input() typesOptionsConfiguration: SelectConfiguration = {};

 _isReadonly: boolean;
  form = new FormGroup({});
  fields: FormlyFieldConfig[] = [];

  constructor(
    @Inject(LOCALE_ID) private _localeId: string,
    @Optional() @Inject(ENIGMATRY_FIELD_TYPE_RESOLVER) private _fieldTypeResolver: FieldTypeResolver) { }

  ngOnInit(): void {
    this.fields = this.initializeFields();
  }

  onSubmit() {
    if (this.form.valid) {
      this.save.emit(this.model);
    }
  }

  resolveFieldType = (type: string, isControlReadonly: boolean): string =>
    this._fieldTypeResolver ? this._fieldTypeResolver(type, this.isReadonly || isControlReadonly) : type;

  initializeFields(): FormlyFieldConfig[] {
    return [
            { key: 'id' },
        {
        key: 'resetFormBtn',
        type: this.resolveFieldType('button', false),
        className: 'primary-button',
        hideExpression: this.fieldsHideExpressions?.resetFormBtn ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.resetFormBtn ? this.fieldsDisableExpressions.resetFormBtn(model) : false)),
        },
        templateOptions: {
        label: '',
        placeholder: '',
        description: '',
        text: $localize `:@@test.form.reset-form-btn.text:Reset`,
        onClick: ($event: any) => this.buttonClick.emit('resetFormBtn'),
        hidden: !true,
        },
        },
        {
        key: 'name',
        type: this.resolveFieldType('input', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.name ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.name ? this.fieldsDisableExpressions.name(model) : false)),
        },
                wrappers: ['form-field', 'tooltip'],
        templateOptions: {
        label: $localize `:@@test.form.name.label:Name`,
        placeholder: $localize `:@@test.form.name.placeholder:Some / Name`,
        description: '',
            appearance: 'outline',
            floatLabel: 'always',
        hidden: !true,
            tooltipText: $localize `:@@test.form.name.tooltip:Tooltip text`,
            required: true,
maxLength: 50,
pattern: /[A-Z]/,
typeFormatDef:undefined
        },
            validation: {
            messages: {
required: (err, field) => $localize `:@@CUSTOM_VALIDATION_MESSAGE_TRANSLATION_ID:CUSTOM_VALIDATION_MESSAGE`,
maxlength: (err, field) => $localize `:@@CUSTOM_VALIDATION_MESSAGE_TRANSLATION_ID:CUSTOM_VALIDATION_MESSAGE`
            }
            },
modelOptions: { updateOn: 'blur' },
asyncValidators: { validation: [ 'isEnsured' ] },
        },
        {
        key: 'description',
        type: this.resolveFieldType('textarea', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.description ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.description ? this.fieldsDisableExpressions.description(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.description.label:Some Description`,
        placeholder: $localize `:@@test.form.description.placeholder:Some Description`,
        description: '',
            rows: 2,
            cols: 0,
        hidden: !true,
        typeFormatDef:undefined
        },
modelOptions: { updateOn: 'blur' },
asyncValidators: { validation: [ 'validDescription' ] },
        },
        {
        key: 'date',
        type: this.resolveFieldType('datepicker', true),
        className: '',
        hideExpression: this.fieldsHideExpressions?.date ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.date ? this.fieldsDisableExpressions.date(model) : true)),
        },
        templateOptions: {
        label: $localize `:@@test.form.date.label:Date`,
        placeholder: $localize `:@@test.form.date.placeholder:Date`,
        description: '',
        hidden: !true,
        typeFormatDef:{name:'date'}
        },
        },
        {
        key: 'money',
        type: this.resolveFieldType('input', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.money ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.money ? this.fieldsDisableExpressions.money(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.money.label:Money`,
        placeholder: $localize `:@@test.form.money.placeholder:Money`,
        description: '',
        hidden: !true,
            type: 'number',
max: 999.99 - 0.1,
typeFormatDef:{name:'number'}
        },
        },
        {
        key: 'amount',
        type: this.resolveFieldType('input', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.amount ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.amount ? this.fieldsDisableExpressions.amount(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.amount.label:Amount`,
        placeholder: $localize `:@@test.form.amount.placeholder:Amount`,
        description: '',
        hidden: !true,
            required: true,
type: 'number',
min: 0 + 1,
max: 100,
typeFormatDef:undefined
        },
            validation: {
            messages: {
min: (err, field) => $localize `:@@test.form.amount.min:CUSTOM_VALIDATION_MESSAGE`,
max: (err, field) => $localize `:@@test.form.amount.max:CUSTOM_VALIDATION_MESSAGE`
            }
            },
        },
        {
        key: 'formStatus',
        type: this.resolveFieldType('select', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.formStatus ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.formStatus ? this.fieldsDisableExpressions.formStatus(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.form-status.label:Form status`,
        placeholder: $localize `:@@test.form.form-status.placeholder:Form status`,
        description: '',
            options: of(this.formStatusOptions).pipe(map(opts => sortOptions(opts, this.formStatusOptionsConfiguration.valueProperty, this.formStatusOptionsConfiguration.sortProperty, this._localeId))),
            valueProp: this.formStatusOptionsConfiguration.valueProperty,
            labelProp: this.formStatusOptionsConfiguration.labelProperty,
        hidden: !true,
        typeFormatDef:undefined
        },
        },
        {
        key: 'mockRadio',
        type: this.resolveFieldType('radio', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.mockRadio ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.mockRadio ? this.fieldsDisableExpressions.mockRadio(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.mock-radio.label:Radio`,
        placeholder: $localize `:@@test.form.mock-radio.placeholder:Radio`,
        description: '',
            options: of(this.mockRadioOptions).pipe(map(opts => sortOptions(opts, this.mockRadioOptionsConfiguration.valueProperty, this.mockRadioOptionsConfiguration.sortProperty, this._localeId))),
            valueProp: this.mockRadioOptionsConfiguration.valueProperty,
            labelProp: this.mockRadioOptionsConfiguration.labelProperty,
        hidden: !true,
        typeFormatDef:undefined
        },
        },
        {
        key: 'categoryId',
        type: this.resolveFieldType('select', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.categoryId ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.categoryId ? this.fieldsDisableExpressions.categoryId(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.category-id.label:Category`,
        placeholder: $localize `:@@test.form.category-id.placeholder:Category`,
        description: '',
            options: this.categoryIdOptions$.pipe(map(opts => sortOptions(opts, this.categoryIdOptionsConfiguration.valueProperty, this.categoryIdOptionsConfiguration.sortProperty, this._localeId))),
            valueProp: this.categoryIdOptionsConfiguration.valueProperty,
            labelProp: this.categoryIdOptionsConfiguration.labelProperty,
        hidden: !true,
        typeFormatDef:undefined
        },
        },
        {
        key: 'types',
        type: this.resolveFieldType('select', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.types ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.types ? this.fieldsDisableExpressions.types(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.types.label:Types`,
        placeholder: $localize `:@@test.form.types.placeholder:Types`,
        description: '',
            options: this.typesOptions$.pipe(map(opts => sortOptions(opts, this.typesOptionsConfiguration.valueProperty, this.typesOptionsConfiguration.sortProperty, this._localeId))),
            valueProp: this.typesOptionsConfiguration.valueProperty,
            labelProp: this.typesOptionsConfiguration.labelProperty,
            multiple: true,
            selectAllOption: $localize `:@@select-all-option.select-all:SelectAll`,
        hidden: !true,
        typeFormatDef:undefined
        },
        },
        {
            type: 'group-type',
            fieldGroupClassName: '',
            wrappers: ['group-wrapper'],
            templateOptions: {
                label: $localize `:@@test.form.group-name.label:Group name`,
                placeholder: $localize `:@@test.form.group-name.placeholder:Group name`,
                disabled: this.isReadonly || false,
                description: ''
            },
            fieldGroup:[
            ]
        },
        {
        key: 'email1',
        type: this.resolveFieldType('input', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.email1 ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.email1 ? this.fieldsDisableExpressions.email1(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.email1.label:Email 1`,
        placeholder: $localize `:@@test.form.email1.placeholder:Email 1`,
        description: '',
        hidden: !true,
            pattern: /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
maxLength: 50,
typeFormatDef:undefined
        },
            validation: {
            messages: {
pattern: (err, field) => $localize `:@@test.form.email1.pattern:CUSTOM_VALIDATION_MESSAGE`
            }
            },
        },
        {
        key: 'email2',
        type: this.resolveFieldType('input', false),
        className: '',
        hideExpression: this.fieldsHideExpressions?.email2 ?? false,
        expressionProperties: {
        'templateOptions.disabled': (model) => (this.isReadonly || (this.fieldsDisableExpressions?.email2 ? this.fieldsDisableExpressions.email2(model) : false)),
        },
        templateOptions: {
        label: $localize `:@@test.form.email2.label:Email 2`,
        placeholder: $localize `:@@test.form.email2.placeholder:Email 2`,
        description: '',
        hidden: !true,
            pattern: /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
maxLength: 50,
typeFormatDef:undefined
        },
            validation: {
            messages: {
pattern: (err, field) => $localize `:@@validators.pattern.emailAddress:Invalid email address format`
            }
            },
        },
    ];
  }
}
